<UserControl
    x:Class="Orbit.Views.ThemeManagerPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:converters="clr-namespace:Orbit.Converters"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:viewModels="clr-namespace:Orbit.ViewModels"
    xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit">

    <UserControl.Resources>
        <converters:ColorSchemeToColorConverter x:Key="ColorSchemeToColorConverter" />
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <Border Grid.Row="0" CornerRadius="8,8,0,0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Offset="0" Color="{DynamicResource MahApps.Colors.Accent}" />
                    <GradientStop Offset="1" Color="{DynamicResource MahApps.Colors.Accent2}" />
                </LinearGradientBrush>
            </Border.Background>
            <Grid Margin="24,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <iconPacks:PackIconMaterial
                    Width="48"
                    Height="48"
                    Margin="0,0,16,0"
                    VerticalAlignment="Center"
                    Foreground="{DynamicResource MahApps.Brushes.IdealForeground}"
                    Kind="Palette" />

                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock
                        FontSize="24"
                        FontWeight="Bold"
                        Foreground="{DynamicResource MahApps.Brushes.IdealForeground}"
                        Text="Theme Customization" />
                    <TextBlock
                        Margin="0,4,0,0"
                        FontSize="13"
                        Foreground="{DynamicResource MahApps.Brushes.IdealForeground}"
                        Opacity="0.95"
                        Text="Transform Orbit's appearance with built-in themes or design your own custom palette" />
                </StackPanel>
            </Grid>
        </Border>

        <!--  Main Content  -->
        <Grid Grid.Row="1" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280" />
                <ColumnDefinition Width="280" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Base Themes Column  -->
            <Border
                Grid.Column="0"
                Margin="0,0,10,0"
                Padding="12"
                Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                BorderThickness="1"
                CornerRadius="4">
                <DockPanel>
                    <StackPanel Margin="0,0,0,12" DockPanel.Dock="Top">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource MahApps.Brushes.Accent}"
                                Kind="ThemeLightDark" />
                            <TextBlock
                                Margin="8,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="15"
                                FontWeight="SemiBold"
                                Text="Base Theme" />
                        </StackPanel>
                        <TextBlock
                            Margin="0,4,0,0"
                            FontSize="11"
                            Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                            Text="Choose light or dark mode" />
                    </StackPanel>

                    <Button
                        Height="36"
                        Margin="0,12,0,0"
                        Command="{Binding ApplyThemeCommand}"
                        DockPanel.Dock="Bottom"
                        Style="{StaticResource MahApps.Styles.Button.Square.Accent}">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial
                                Width="16"
                                Height="16"
                                Margin="0,0,8,0"
                                Kind="Check" />
                            <TextBlock VerticalAlignment="Center" Text="Apply Theme" />
                        </StackPanel>
                    </Button>

                    <ListBox
                        BorderThickness="0"
                        ItemsSource="{Binding BaseThemes}"
                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                        SelectedItem="{Binding SelectedBaseTheme}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,2" Padding="8,6">
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconMaterial
                                            Width="16"
                                            Height="16"
                                            VerticalAlignment="Center">
                                            <iconPacks:PackIconMaterial.Style>
                                                <Style TargetType="iconPacks:PackIconMaterial">
                                                    <Setter Property="Kind" Value="WeatherNight" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding}" Value="Light">
                                                            <Setter Property="Kind" Value="WeatherSunny" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </iconPacks:PackIconMaterial.Style>
                                        </iconPacks:PackIconMaterial>
                                        <TextBlock
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="13"
                                            Text="{Binding}" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </Border>

            <!--  Color Schemes Column  -->
            <Border
                Grid.Column="1"
                Margin="0,0,10,0"
                Padding="12"
                Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                BorderThickness="1"
                CornerRadius="4">
                <DockPanel>
                    <StackPanel Margin="0,0,0,12" DockPanel.Dock="Top">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource MahApps.Brushes.Accent}"
                                Kind="FormatColorFill" />
                            <TextBlock
                                Margin="8,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="15"
                                FontWeight="SemiBold"
                                Text="Accent Color" />
                        </StackPanel>
                        <TextBlock
                            Margin="0,4,0,0"
                            FontSize="11"
                            Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                            Text="Select your preferred color" />
                    </StackPanel>

                    <ListBox
                        BorderThickness="0"
                        ItemsSource="{Binding ColorSchemes}"
                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                        SelectedItem="{Binding SelectedColorScheme}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,2" Padding="8,6">
                                    <StackPanel Orientation="Horizontal">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                                            BorderThickness="1"
                                            CornerRadius="3">
                                            <Border.Background>
                                                <SolidColorBrush Color="{Binding Converter={StaticResource ColorSchemeToColorConverter}}" />
                                            </Border.Background>
                                        </Border>
                                        <TextBlock
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="13"
                                            Text="{Binding}" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </Border>

            <!--  Custom Themes & Preview Column  -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Live Preview  -->
                <Border
                    Grid.Row="0"
                    Margin="0,0,0,10"
                    Padding="15"
                    Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                    BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                    BorderThickness="1"
                    CornerRadius="4">
                    <StackPanel>
                        <StackPanel Margin="0,0,0,12" Orientation="Horizontal">
                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource MahApps.Brushes.Accent}"
                                Kind="Eye" />
                            <TextBlock
                                Margin="8,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="15"
                                FontWeight="SemiBold"
                                Text="Live Preview" />
                        </StackPanel>

                        <!--  Preview Elements  -->
                        <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                            <Button
                                Width="90"
                                Height="28"
                                Margin="0,0,8,0"
                                Content="Primary"
                                Style="{StaticResource MahApps.Styles.Button.Square.Accent}" />
                            <Button
                                Width="90"
                                Height="28"
                                Content="Secondary" />
                        </StackPanel>

                        <Border
                            Margin="0,0,0,8"
                            Padding="10,6"
                            Background="{DynamicResource MahApps.Brushes.Accent}"
                            CornerRadius="3">
                            <TextBlock
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource MahApps.Brushes.IdealForeground}"
                                Text="Accent Background" />
                        </Border>

                        <StackPanel Orientation="Horizontal">
                            <Ellipse
                                Width="12"
                                Height="12"
                                Margin="0,0,6,0"
                                Fill="#4CAF50" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="12"
                                Text="Status Indicator Example" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!--  Custom Theme Creator  -->
                <Border
                    Grid.Row="1"
                    Padding="15"
                    Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                    BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                    BorderThickness="1"
                    CornerRadius="4">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0">
                            <StackPanel Margin="0,0,0,12" Orientation="Horizontal">
                                <iconPacks:PackIconMaterial
                                    Width="18"
                                    Height="18"
                                    VerticalAlignment="Center"
                                    Foreground="{DynamicResource MahApps.Brushes.Accent}"
                                    Kind="Brush" />
                                <TextBlock
                                    Margin="8,0,0,0"
                                    VerticalAlignment="Center"
                                    FontSize="15"
                                    FontWeight="SemiBold"
                                    Text="Custom Theme Creator" />
                            </StackPanel>

                            <TextBlock
                                Margin="0,0,0,4"
                                FontSize="12"
                                Text="Theme Name" />
                            <TextBox
                                Height="32"
                                Margin="0,0,0,10"
                                FontSize="13"
                                Text="{Binding CustomThemeName, UpdateSourceTrigger=PropertyChanged}" />

                            <TextBlock
                                Margin="0,0,0,4"
                                FontSize="12"
                                Text="Base Theme" />
                            <ComboBox
                                Height="32"
                                Margin="0,0,0,10"
                                FontSize="13"
                                ItemsSource="{Binding BaseThemes}"
                                SelectedItem="{Binding SelectedBaseTheme}">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <iconPacks:PackIconMaterial
                                                Width="14"
                                                Height="14"
                                                Margin="0,0,6,0"
                                                VerticalAlignment="Center">
                                                <iconPacks:PackIconMaterial.Style>
                                                    <Style TargetType="iconPacks:PackIconMaterial">
                                                        <Setter Property="Kind" Value="WeatherNight" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding}" Value="Light">
                                                                <Setter Property="Kind" Value="WeatherSunny" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </iconPacks:PackIconMaterial.Style>
                                            </iconPacks:PackIconMaterial>
                                            <TextBlock VerticalAlignment="Center" Text="{Binding}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>

                            <TextBlock
                                Margin="0,0,0,4"
                                FontSize="12"
                                Text="Accent Color" />
                            <xctk:ColorCanvas
                                Width="280"
                                Height="140"
                                Margin="0,0,0,12"
                                SelectedColor="{Binding SelectedCustomColor}" />

                            <StackPanel Orientation="Horizontal">
                                <Button
                                    Width="130"
                                    Height="32"
                                    Margin="0,0,8,0"
                                    Command="{Binding SaveCustomThemeCommand}"
                                    Style="{StaticResource MahApps.Styles.Button.Square.Accent}">
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconMaterial
                                            Width="14"
                                            Height="14"
                                            Margin="0,0,6,0"
                                            Kind="ContentSave" />
                                        <TextBlock VerticalAlignment="Center" Text="Save" />
                                    </StackPanel>
                                </Button>

                                <Button
                                    Width="130"
                                    Height="32"
                                    Margin="0,0,8,0"
                                    Command="{Binding ApplyCustomThemeCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconMaterial
                                            Width="14"
                                            Height="14"
                                            Margin="0,0,6,0"
                                            Kind="Check" />
                                        <TextBlock VerticalAlignment="Center" Text="Apply" />
                                    </StackPanel>
                                </Button>

                                <Button
                                    Width="90"
                                    Height="32"
                                    Command="{Binding DeleteCustomThemeCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconMaterial
                                            Width="14"
                                            Height="14"
                                            Margin="0,0,6,0"
                                            Kind="Delete" />
                                        <TextBlock VerticalAlignment="Center" Text="Delete" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>

                        <!--  Saved Custom Themes List  -->
                        <GroupBox
                            Grid.Row="1"
                            Margin="0,15,0,0"
                            Header="Saved Custom Themes">
                            <ListBox
                                Margin="5"
                                BorderThickness="0"
                                ItemsSource="{Binding CustomThemes}"
                                SelectedItem="{Binding SelectedCustomTheme}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border Margin="0,2" Padding="8,6">
                                            <StackPanel Orientation="Horizontal">
                                                <Border
                                                    Width="24"
                                                    Height="24"
                                                    VerticalAlignment="Center"
                                                    BorderBrush="{DynamicResource MahApps.Brushes.Gray5}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding AccentHex}" />
                                                    </Border.Background>
                                                </Border>
                                                <StackPanel Margin="10,0,0,0" VerticalAlignment="Center">
                                                    <TextBlock
                                                        FontSize="13"
                                                        FontWeight="SemiBold"
                                                        Text="{Binding Name}" />
                                                    <TextBlock
                                                        FontSize="11"
                                                        Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                                        Text="{Binding BaseTheme, StringFormat='Base: {0}'}" />
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </GroupBox>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
